"use strict";import{mutableData}from"../../../constants/mutableData.js";import{loadSASPanelPosition}from"../../positionService/loadSASPanelPosition.js";import{hideSASPanel}from"../../toggleSASPanel/hideSASPanel.js";import{createSASContainer}from"./createSASContainer.js";import{setDockedState}from"./setDockedState.js";import{makeId}from"./makeId.js";import{manageEmbeddedPanel}from"./manageEmbeddedPanel.js";import{manageContainerPosition}from"./manageContainerPosition.js";const loadSAS=async()=>{var a=chrome.runtime.id;location.ancestorOrigins.contains("chrome-extension://"+a)||(mutableData.gSasLoaded=!0,chrome?.storage?.local&&chrome.storage.local.get(["ukn"],function(a){mutableData.gUkn=a.ukn,null!=mutableData.gUkn&&"undefined"!=mutableData.gUkn&&null!=mutableData.gUkn&&0!=mutableData.gUkn||(mutableData.gUkn=makeId(16),chrome.storage.local.set({ukn:mutableData.gUkn})),mutableData.gFn=encodeURIComponent(navigator.platform+" "+window.screen.width*window.devicePixelRatio+"x"+window.screen.height*window.devicePixelRatio)}),await createSASContainer(),await manageContainerPosition(),await manageEmbeddedPanel(),$(window).resize(function(a){$("#SASContainer").data("draggable")&&$("#SASContainer").draggable("option","containment",[0,0,$(window).width()-$("#SASContainer").width(),$(window).height()])})),$("#closeSAS").click(function(){hideSASPanel()}),$("#backButton").click(function(){document.getElementById("sasFrame").contentWindow.history.back()}),$("#position-buttons li").click(function(){mutableData.gDockedState=$(this).data("position"),setDockedState(mutableData.gDockedState),loadSASPanelPosition()})};export{loadSAS};