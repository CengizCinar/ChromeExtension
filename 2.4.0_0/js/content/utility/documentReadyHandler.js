"use strict";import{loadSAS}from"./loadSasScript/loadSAS/loadSAS.js";import{mutableData}from"../constants/mutableData.js";import{showSasExtensionMessage}from"./showSasExtensionMessage.js";import{parseAmz}from"./parseAmz/parseAmz.js";import{contentScriptMessages}from"../constants/contentScriptMessages.js";const documentReadyHandler=async()=>{mutableData.gSasLoaded||await loadSAS(),await manageCSPMetaElement();var e=RegExp("https*://(?:www.)*(?:smile.)*amazon.(co.uk|es|it|de|fr|com|ca).*");document.URL.match(e)&&await parseAmz(),$(document.body).delegate("a.SaSExTaP5Dc32","click",function(e){var a={origin:window.location.origin,...$(this).data()};showSasExtensionMessage(a),e.preventDefault()}),chrome.runtime.sendMessage({message:contentScriptMessages.READY})},removeCSPMetaElement=()=>{document.querySelector('meta[http-equiv="Content-Security-Policy"]')?.remove()},manageCSPMetaElement=async()=>{((await chrome.storage.sync.get("options"))?.options)?.isCSPDisabled&&removeCSPMetaElement()};export{documentReadyHandler};