"use strict";import{parseConstants}from"../../constants/parseConstants.js";import{parseCarousels}from"./parseCarousels.js";import{process}from"./process.js";const parseAmz=async()=>{const{TARGET_SELECTOR:e,selectors:t,observerOptions:s}=parseConstants;var o=document.querySelector(e);o&&new MutationObserver(async e=>{for(const s of e){if(!s.addedNodes.length)return;if(s.addedNodes[0].dataset.asin&&s.addedNodes[0].matches(t[0].CARD_SELECTOR))await process(s.addedNodes[0],t[0]);else for(const o of t)for(const r of s.addedNodes[0].querySelectorAll(o.CARD_SELECTOR))await process(r,o)}}).observe(o,s);for(const r of t)for(const a of document.querySelectorAll(r.CARD_SELECTOR))await process(a,r);await parseCarousels();document.querySelectorAll("#rhf-container").forEach(e=>{new MutationObserver(async e=>{for(const s of e)if(s?.length)for(const o of s)1===o.nodeType&&o.matches(".rhf-border")&&await parseCarousels(o)}).observe(e,{childList:!0})})};export{parseAmz};