import{MESSAGES}from"../constants/messages.js";const manageConflictsWithLegacyExtension=t=>{chrome.tabs.sendMessage(t.id,{command:"getHTML"},function(e){e?.html&&(e=e.html.match(/<[^>]+id="SASContainer"[^>]*>/g))?.length&&e.forEach(e=>{e.indexOf("beta-extension")<0&&showAlertAndDisableItself(t)}),chrome.runtime.lastError&&console.log("Runtime Error")})},showAlertAndDisableItself=e=>{chrome.tabs.sendMessage(e.id,{command:"showAlert",title:MESSAGES.REMOVE_ANOTHER_VERSION_TITLE,message:MESSAGES.REMOVE_ANOTHER_VERSION},function(e){e?.isSent&&disableItself(),chrome.runtime.lastError&&console.log("Runtime Error")})},disableItself=()=>{chrome.management.setEnabled("kdjdiajopilediaadgkjijbcnegggpdd",!1,function(){chrome.runtime.lastError&&console.log("Error disabling extension: "+chrome.runtime.lastError.message)})};export{manageConflictsWithLegacyExtension};